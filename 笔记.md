MySQL workbench

* 可视化的mysql客户端



```mysql
use myblog; // 链接库
-- show tables; // --空格 注释

insert into users(username,password,realname) values('zt','123','张涛'); // users是表名，在users表插入一列，这3个字段的值分别是values中的数据
SELECT * from users;// 查询users的所有数据，有性能问题
SELECT id,username from users;// 查询users的id和username，多个查询用 , 分割
SELECT * from users WHERE  username='dd' or realname="多多" or realname="张涛";// 或条件查询，where后面跟条件判断语句
SELECT	* FROM users WHERE username="dd" and id="4";// 与条件查询

link语句（模糊查询）
SELECT * FROM users WHERE username LIKE '%z%'; // 模糊查询username中带z的数据，

排序语句 （order by）
SELECT * FROM users WHERE username LIKE '%z%' ORDER BY id DESC; // 根据id来排序，默认是正序，DESC是倒序

更新语句(update)
update users set `password`='123456' where username='多多';// 更新users表中password为123456的值，多个值用,分隔 where条件表示只更新row中username为多多的时候才更新

删除语句（delete）慎重使用，一般都使用逻辑删除，比如使用status作状态，1为正常，0为删除
delete from users where username='zt'; // 物理删除users表中 username为zt的row




```

当不想再往下走，同时又是promise异步，可以直接return，然后等then回调即可。前提是需要判断promise有值

MySql是硬盘数据库、redis是内存数据库



## session是啥，为什么会存在
1.和cookie类似，但直接使用cookie有不少弊端。例如
  1. http是无状态，想要记住用户登录，需要使用某个标识，cookie能很好的做到
  2. cookie在浏览器有大小限制，chrome仅仅为4kb；
  3. 直接把用户信息明文使用cookie传输给客户端，太危险

2.session主要利用server端来存储，但客户端还是使用cookie来保存与传输
 1. server使用唯一的别名（userId）来存储对应的用户信息，有点类似http2的索引表；
 2. server没有大小限制

## 那时候情况下适合用session
一般在登录场景使用session，单点登录也适用

直接使用变量来存储session有什么弊端？

线上程序一般会有多个进程，进程间数据不共享，且server的内存有限（访问量暴增，内存不够时，导致进程崩溃），直接使用变量来存储，session命中到其他进程中，导致信息差。进程重启时会导致变量初始化


## 为什么使用redis，不用redis会有什么问题?
redis(内存数据库)，和mySql(硬盘数据库)类似，都是用来保存数据。但redis效率比mySql读写效率快
使用场景：
1. 读很频繁，对性能要求高（登录鉴权，内存读写很快）
2. 临时数据，哪怕断电丢失都没关系（登录鉴权，丢失了就重新登录即可）
3. 数据量不大（session一般很小）
4. 只会有1个redis，其他的进程访问不存在信息差
5. 可独立扩展（内存不够了，加配置）

## nginx常用场景、基本命令与配置
场景：
1. 静态服务、负载均衡
2. 反向代理

常用命令
nginx -t // 检查配置文件格式是否正确

启动nginx; 

重启nginx -s reload

停止nginx -s stop

反向代理

server {
    # 根路径匹配
    location / {
        proxy_pass http://localhost:8001;
    }
    # 反带api路径，并写入host
    location /api/ {
        proxy_pass http://localhost:8000;
        proxy_set_header Host $host;
    }

}



